---
layout: post
title: "误用二极管引发的思考"
author: Gun
mail: qg.li@rcstech.org
star: 4
layout: post
description: "误用二极管引发的思考"
category: 经验总结
tags: 
  - 电路
---

　　二极管无论是在电力电子还是模拟电路中都得到广泛的应用，但是我们必须要首先明白加了二极管需要达到什么目的。

<!--more-->
<br>

## 问题记录

　　由于自己的粗心大意，误用二极管，曾一度认为这没有问题，后来才发现是这个小小的二极管的问题。虽然后来在经过科长大人和学长、学姐的指导，将问题解决了，但是觉得有必要把这次问题给稍微记录下来。

　　先上图：

![图1]({{site.img_path}}/2014-2-13 fig_1.png)
<br>

　　在经过赵艳媛同学的细心提醒下，图中的D200和D201两只二极管，是本着不让涵道电调的电流灌入光耦，而对光耦的正常工作产生影响。其实出发点是好的，在做电路的时候就要有这种细心的态度。可问题就出在这。

## 解决过程

　　在这里光耦是为了将主控板和电调进行隔离。发现问题后，我们拿示波器观察了主控PA8和PA9的波形，并没有问题。于是又查了经过缓冲器后的波形，发现还是没有问题。最后测了输出引脚的波形，还是没有问题。（因为当时时间紧张，并没有想着去把波形给拍下来。）找来其他几个队员一起探讨问题到底出在哪，但都不知道为什么。毕竟是自己做的板，处理问题首先还是要自己想办法解决。换了光耦发现情况还是一样，崩溃的我曾一度想把那一路上的元器件给全部换一下。实在没办法了，我只好请教科长大人了，问问他有没有什么好的建议。

　　科长大人并没有直接告诉我问题出在哪，而是让我把二极管给短路看能不能工作。短路路后，如下图，涵道竟然可以正常工作了。

![图2]({{site.img_path}}/2014-2-13 fig_2.png)
<br>

　　正当我高兴时，学长却质问我是什么原因导致的，我却不知道。于是，有自己拿了示波器测了波形，发现和没短前的波形大同小异。学长又叫我恢复原来的样子，再好好查一下到底是哪出现问题了。看了波形还是一样。但当我拿了万用表测了一下，发现短路前和短路后的有效值并不一样。当我再次把示波器的测量功能打开后，惊人地发现波形在形状上是一样，但是低电平的幅值却是将近4V，这对于单片机而言都是高电平，哪来的方波？！

　　问题是锁定在二极管上，但我还是不知道为什么。问了科长才恍然大悟！科长跟我说了电调的等效负载模型（如下图）。

![图3]({{site.img_path}}/2014-2-13 fig_3.png)
<br>

　　分析：当节点A为高电平时，电流经过二极管向负载的对地电容充电；当节点A为低电平时，二极管限制了电容的放电回路，所以A点的电位不会降低，这也就是为什么低电平为什么会那么高。

　　如果事先花时间了解一下电调的工作原理，其实会发现其实没必要加那个二级管。下面我也简单来说一下电调的工作原理，只是把网上的版本精简一下。

　　此模块是无刷电调的驱动电机模块，是一个三相驱动桥。值得一提的是，这里有一个自举升压电路，它用到的原理正是我上面提到的二极管D7的单向导电性和电容C12的充放电以及电容C12两端的电压不能瞬间变化，而二极管D8和电容C13是为了稳压。自举升压是为了提供足够大的门极电压，来使得MOSFET能够导通。

![图4]({{site.img_path}}/2014-2-13 fig_4.png)
<br>

![图5]({{site.img_path}}/2014-2-13 fig_5.png)
<br>
<br>

　　过零检测模块是为了让单片机能够控制好三相电机的换相。

![图6]({{site.img_path}}/2014-2-13 fig_6.png)
<br>

　　其他的控制部分就不在多说，感兴趣请自行上网查阅。在这我想解释赵艳媛同学的问题：为什么STM32开发板将控制线连在电调上，不需要给它额外供电。其原因就是那个降压/稳压模块所起的作用。再回到我做的那个板的时候，你也就清楚光耦的输出端为什么不需要加二极管来防止电调的灌电流了，这电流实在很小。

　　二极管的种类和用法均有很多，比如稳压二极管、续流二极管、肖特基二极管、整流二极管……这里不再一一赘述。

## 最后的结论：

　　1.出现的问题虽然会影响着整个工作进度，但是对自己的成长却很有必要；

　　2.遇到不懂的地方先要自己思考，实在没辙了再去问学长，学长其实一直都很热心，我们要在虚心请教中慢慢进步；

　　3.将自己调试过程中遇到的有意义的问题一定要记录下来；

　　4.目前自己还有很多要学，只有静下心来才能真正的学到东西。
